<%- include("../../layouts/head.ejs") %>

<body>
  <%- include("../../layouts/header.ejs") %>
  <%- include("../../layouts/leftMenu.ejs") %>
  <div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="#"><svg class="glyph stroked home">
              <use xlink:href="#stroked-home"></use>
            </svg></a></li>
        <li class="active">Phòng</li>
      </ol>
    </div>
    <!--/.row-->
    <div class="row">
      <div class="col-lg-12">
        <h1 class="page-header text-center">Danh sách phòng</h1>
      </div>
    </div>
    <!--/.row-->
    <div id="toolbar" class="btn-group">
      <a href="/admin/rooms/add" class="btn btn-success">
        <i class="glyphicon glyphicon-plus"></i> Thêm phòng
      </a>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <div class="panel panel-default">
          <div class="panel-body">
            <table data-toolbar="#toolbar" data-toggle="table">

              <thead>
                <tr>
                  <th data-field="id" data-sortable="true">ID</th>
                  <th data-field="name" data-sortable="true">Tên phòng</th>
                  <th data-field="price" data-sortable="true">Kích cỡ</th>
                  <th>Kiểu phòng</th>
                  <th>Hình ảnh</th>
                  <th>Trạng thái</th>
                  <th>Hành động</th>
                </tr>
              </thead>
              <tbody>
                <% rooms.forEach((room, index) => { %>
                <tr>
                  <td style=""> <%=index+1 %> </td>
                  <td style=""><%=room.name %></td>
                  <td style=""><%=room.size%></td>
                  <% if (room.type === "single") { %>
                  <td><span class="label label-danger">Phòng đơn</span></td>
                  <% }else if (room.type === "double"){ %>
                  <td><span class="label label-success">Phòng đôi</span></td>
                  <% }else { %>
                  <td><span class="label label-warning">Phòng VIP</span></td>

                  <% } %>
                  
                  <td style=""><img width="160" height="160" src="/assets/images/uploads/rooms/<%= room.image %>" /></td>
                  <% if (room.status === "empty") { %>
                  <td><span class="label label-danger">Còn trống</span></td>
                  <% }else{ %>
                  <td><span class="label label-success">Đang được đặt</span></td>
                  <% } %>
                  <td class="form-group">
                    <a href="/admin/room-edit/<%=room._id%>" class="btn btn-primary"><i class="glyphicon glyphicon-pencil"></i></a>
                    <a href="/admin/room-delete/<%=room._id%>"
                      onclick="return confirm('Bạn chắc chắn muốn xoá phòng <%=room.name %> chứ ?')" class="btn btn-danger"><i
                        class="glyphicon glyphicon-remove"></i></a>
                  </td>
                </tr> 
                <% }) %>
              </tbody>
            </table>
          </div>
          <div class="panel-footer" style='display: flex; justify-content: center;'>
            <nav aria-label="Page navigation example">
              <ul class="pagination">
                <nav aria-label="Page navigation example">
                  <ul class="pagination">
                    <% if (page > 1) { %>
                    <li class="page-item ">
                      <a class="page-link" href="/admin/rooms?page=<%= page - 1 %>"> Prev </a>
                    </li>
                    <% } %>
                    <% range.map((i) => { %>
                    <li class="page-item <%= page === i ? "active" : "" %>">

                      <% if (i === "...") { %>

                      <span> <%= i %> </span>

                      <% } else { %>

                      <a class="page-link" href="/admin/rooms?page=<%= i %>"><%= i %></a>
                      <% } %>
                    </li>
                    <% }) %>
                    <% if (page < totalPages) { %>
                    <li class="page-item ">
                      <a class="page-link" href="/admin/rooms?page=<%= page + 1 %>"> Next </a>
                    </li>
                    <% } %>

                  </ul>
                </nav>
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </div>
    <!--/.row-->
  </div>
  <!--/.main-->
</body>
<script src="js/jquery-1.11.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/bootstrap-table.js"></script>

</html>
