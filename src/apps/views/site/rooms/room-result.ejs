<!-- Header -->
<%- include("./../layouts/header") %>
<!-- Breadcrumb Section Begin -->
<div class="breadcrumb-section">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="breadcrumb-text">
          <h2>Danh sách phòng </h2>
          <div class="bt-option">
            <a href="/">Trang chủ</a>
            <span>Phòng trống</span>
          </div>
          <div class="mt-5">
            <h4>Mời bạn đặt <span class="badge badge-warning"> <%=numberRoom%></span> phòng thật sang chảnh và đẹp nào
              !!! </h4>
          </div>
          <input type="hidden" value="<%=numberRoom%>" id="numberRoom"/>
          <div class="mt-5">
            <button type="button" onclick="booking()" class="btn btn-outline-success">Đặt phòng</button>
          </div>
          
        </div>

      </div>
    </div>
  </div>
</div>
<!-- Breadcrumb Section End -->
<!-- Rooms Section Begin -->
<section class="rooms-section spad">
  <div class="container">
    <div class="row">
      <% rooms.forEach((room, index) => { %>
      <div class="col-lg-4 col-md-6">
        <div class="room-item">
          <a href="/room-detail/<%=room._id %>">
            <img src="/assets/images/uploads/rooms/<%=room.image %>" alt="" height="360px" width="234px" /> </a>
          <div class="ri-text">
            <h5 class="text-center text-uppercase text-warning"> <%=room.type %></h5>
            <div class="d-flex justify-content-end">
              <div class="form-check checkbox-rounded         checkbox-living-coral-filled mb-2">
                <input type="checkbox" class="form-check-input filled-in" id="clickMe" value="<%=room._id %>" name="roomIds">
              </div>
            </div>
            <h3 class="text-center" style="font-size: 24px"><%=formatPrice(room.price) %> đ<span>/ 1 ngày</span></h3>

            <table class="m-auto">
              <tbody>
                <tr>
                  <td class="r-o">Kích cỡ:</td>
                  <td><%=room.size %> m2</td>
                </tr>
                <tr>
                  <td class="r-o">Tối đa:</td>
                  <td> 5 người</td>
                </tr>
                <tr>
                  <td class="r-o">Tên phòng :</td>
                  <td class="text-success"><%=room.name %></td>
                </tr>
                <tr>
                  <td class="r-o">Dịch vụ:</td>
                  <td><%=room.services %></td>
                </tr>
              </tbody>
            </table>
            <div class="text-center">
              <a href="/room-detail?id=<%=room._id %>&startAt=<%=startAt%>&endAt=<%=endAt%>" class="primary-btn ">Xem
                thêm</a>
            </div>
          </div>
        </div>
      </div>
      <% }) %>
      <div class="col-lg-12 d-flex justify-content-center ">
        <% if (page > 1) { %>
        <div class="room-pagination p-2 ">
          <a
            href="/checks?startAt=<%=startAt%>&endAt=<%=endAt%>&numberRoom=<%=numberRoom%>&numberCustomer=<%=numberCustomer%>&page=<%=page - 1 %>">
            Prev </a>
        </div>
        <% } %>
        <% range.map((i) => { %>
        <div class="room-pagination p-2 <%= page === i ? "active" : "" %>">
          <% if (i === "...") { %>
          <span> <%= i %> </span>
          <% } else { %>
          <a
            href="/checks?startAt=<%=startAt%>&endAt=<%=endAt%>&numberRoom=<%=numberRoom%>&numberCustomer=<%=numberCustomer%>&page=<%= i %>"><%= i %></a>
          <% } %>
        </div>
        <% }) %>
        <% if (page < totalPages) { %>
        <div class="room-pagination p-2 ">
          <a
            href="/checks?startAt=<%=startAt%>&endAt=<%=endAt%>&numberRoom=<%=numberRoom%>&numberCustomer=<%=numberCustomer%>&page=<%= page + 1 %>">
            Next </a>
        </div>
        <% } %>
      </div>
    </div>
  </div>

</section>
<!-- Rooms Section End -->
<script>
  function booking(){
      // var checkbox = document.getElementsByName('roomIds');
      var checkbox = $('[name="roomIds"]'); 
      var arrIds = [];
      var numberRoom = $("#numberRoom").val();
      for (var i = 0; i < checkbox.length; i++) {
        if (checkbox[i].checked === true) {
          arrIds.push(checkbox[i].value);
        }
      }
      if(numberRoom != arrIds.length) {
        alert(' Phai check du 5 phong ')
      }else{
        alert('Gui du lieu thanh cong')
      }
      
    }
</script>
<%- include("./../layouts/footer") %>
